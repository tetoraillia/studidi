<div style="display: flex; justify-content: space-between; align-items: flex-start;">
  <div>
    <h1>Course: <%= @course.title %></h1>

    <% if policy(@course).update? %>
      <%= link_to "New Topic", new_course_topic_path(@course) %>
      <%= link_to "Edit", edit_course_path(@course) %>
    <% end %>

    <% if policy(@course).invite? %>
      <%= link_to "Invite", invite_course_path(@course), class: "btn btn-success" %>
    <% end %>
    <%= button_to "Bookmark", bookmarks_path(course_id: @course.id), method: :post, class: "btn btn-primary" %>

    <p>Description: <%= @course.description %></p>
    <p>Instructor: <%= @course.instructor.first_name %></p>
    <p>
      <span class="badge <%= @course.public ? "badge-public" : "badge-private" %>">
        <%= @course.public ? "Public" : "Private" %>
      </span>
    </p>
  </div>
  
  <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; min-width: 200px;">
    <p style="margin-top: 0; font-weight: bold;">People in this course:</p>
    <p>teacher: <%= @course.instructor.first_name %></p>
    <% @course.enrollments.each do |enrollment| %>
      <div style="padding: 5px 0; border-bottom: 1px solid #eee;">
        <p>
          <%= enrollment.user.first_name %>
          <% if policy(enrollment).destroy? %>
            <%= button_to "Kick", kick_course_enrollment_path(@course, enrollment), method: :delete, data: { confirm: "Are you sure you want to remove this student?" } %>
          <% end %>
        </p>
      </div>
    <% end %>

    <% if @course.ends_at.present? %>
      <p> Course ends at: <%= @course.end_date %></p>
    <% end %>
  </div>
</div>

<% @topics.each do |topic| %>
  <div>
    <%= topic.title %>
    <% if policy(topic).edit? %>
      <%= link_to "Edit", edit_course_topic_path(topic.course_id, topic.id) %>
      <%= button_to "Destroy", course_topic_path(topic.course_id, topic.id), method: :delete, data: { confirm: "Are you sure?" } %>
    <% end %>
  </div>
<% end %>

<br>

<%= link_to "Back to Courses", courses_path %>
